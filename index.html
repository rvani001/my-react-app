<!doctype html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/src/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- Using MapLibre GL JS -->
    <script src='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.js'></script>
    <link href='https://unpkg.com/maplibre-gl@latest/dist/maplibre-gl.css' rel='stylesheet' />
    <!-- Using Google Fonts: Noto Sans Thai -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Thai:wght@100..900&display=swap" rel="stylesheet">
  </head>

  <style>
    body, h1, h2, h3, h4, h5, h6  { 
      font-family: "Noto Sans Thai", Helvetica;
    }
  </style>

  <body>
    <header>
      <h1 style="font-size: 47px; font-weight: 400;">OPTIMI<span style="color: #0094fd;">Z</span><span style="color: #39cc34;">E</span></h1>
      <p style="font-size: 12px;">โปรแกรมตรวจสอบการทำงานระบบโซลาร์อัตโนมัติโดย Machine Learning.</p>
    </header>
    <ul class="topnav">
      <li><a href="#">Home</a></li>
      <li><a href="#">News</a></li>
      <li><a href="#">Contact</a></li>
      <li><a href="#">About</a></li>
    </ul>

    <div class="row">
      <div class="menuSidebar">
        <button id="homeButton" class="btn"><i class="fa fa-map-o"></i> Home</button>
        <button id="addSiteButton" class="btn"><i class="fa fa-plus-square"></i> Add Site</button>
        <button id="editSiteButton" class="btn"><i class="fa fa-circle-o-notch"></i> Edit Site</button>
        <button id="showStatButton" class="btn"><i class="fa fa-area-chart"></i>  Statistic</button>
        <button id="sendReportButton" class="btn"><i class="fa fa-file"></i> Report</button>
      </div>

      <div class="statusSidebar">
        <div class="statusFaultBox">10 Fault(s)</div>
        <div class="statusWarningBox">9 Warning(s)</div>
        <div class="statusInternetBox">3 No Connection(s)</div>
        <div class="statusVerifiedBox">99 Verified</div>

      </div>

      <!--<div class="statusSidebar">
        <div id="root"></div>
        <script type="module" src="/src/main.jsx"></script>
      </div>-->

      <div id="mapWindow" class="mainMapContent active">
        <div id='map' style='width: 100%; height: 800px;'></div>
        <script>
          var map = new maplibregl.Map({
            container: 'map',
            style: 'https://demotiles.maplibre.org/globe.json', // stylesheet location
            center: [100.7270403, 13.6887128], // starting position [lng, lat]
            zoom: 8 // starting zoom
          });
        </script>
      </div>

      
      <div id="addWindow" class="mainMapContent">
        <form class="add-container">
          <label> Site Name: </label>
          <input type="text" id="siteName" /><br><br>
          <label> Site Code: </label>
          <input type="text" id="siteCode" /><br><br>
          <label for="inverter">โปรดเลือกยี่ห้ออินเวอร์เตอร์: </label>
          <select name="inverter" id="inverter" size="1">
          <option value="Sungrow">Sungrow</option>
          <option value="Huawei">Huawei</option>
          <option value="SolarEdge">SolarEdge</option>
          <option value="Delta">Delta</option>
          <option value="Goodwe">Goodwe</option>
          <option value="SMA">SMA</option>
          <option value="Others">Others</option>
          </select><br><br>
          <button type="button" onclick="addSiteAPI(document.getElementById('siteName').value , 
                                                    document.getElementById('siteCode').value , 
                                                    document.getElementById('inverter').value)">
          Add Site to Database</button>
        </form>  
      </div>

      <div id="editWindow" class="mainMapContent">
        <div class="edit-container">
          <div class="site-list-container">
            <h3>Site List</h3>
            <form class="site-list-box">
              <select id="dynamicSelectSites" onchange="handleSiteSelectChange(this.value)" size="10" style='width: 100%;'></select>
              <!-- Update all sites when loaded from DynamoDB and populate -->
              <script>
                document.addEventListener('DOMContentLoaded', function(){
                  getAllSiteAPI();
                });
              </script>
            </form>
            <button type="button" onclick="getAllSiteAPI()">Delete Site</button>
          </div>
          <div class="site-detail-container">
            <h3>Site Detail</h3>
            <p id="siteDetail"> Site Details </p>
            <script> document.getElementById('siteDetail').innerHTML = " "; </script>
            <!-- Site items will be populated here -->
          </div>
        </div>
      </div>

      <div id="statWindow" class="mainMapContent">
          <p style="background-color: pink; width: 100%; height: 800px;">Statistic Tab</p>
      </div>

      <div id="reportWindow" class="mainMapContent">
          <p style="background-color: pink; width: 100%; height: 800px;">Report Tab</p>
      </div>

      <!--Javascript to switch content in Main Content Window-->
      <script src="./src/mainWindow.js"></script>
      <script src="./src/modifySiteDB.js"></script>

    </div>



    <footer>
      <h2>Footer</h2>
    </footer>

  </body>
</html>
